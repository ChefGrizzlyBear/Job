<!DOCTYPE html>
<html>
<head>
    <title>Indy Hiring Map - Live GPS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; background: #f0f2f5; }
        #map { height: 650px; width: 100%; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); border: 2px solid #fff; }
        .popup-content b { color: #2980b9; font-size: 1.1em; display: block; margin-bottom: 5px; }
        .popup-content p { margin: 0; font-size: 0.95em; color: #34495e; }
        h2 { color: #2c3e50; margin-bottom: 10px; }
        .legend { background: white; padding: 10px; border-radius: 5px; line-height: 1.5; font-size: 0.85em; }
        /* Simple pulse animation for your GPS location */
        .user-location-icon {
            background-color: #3498db;
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.8);
        }
    </style>
</head>
<body>

    <h2>üìç Indy Restaurant Hiring Map</h2>
    <p><i>Note: Please click "Allow" when prompted for your location to see yourself on the map.</i></p>
    
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize map centered on downtown Indianapolis
        const map = L.map('map').setView([39.7715, -86.153], 15);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);

        // --- Restaurant Data ---
        const restaurants = [
            { name: "The Eagle", lat: 39.7712, lng: -86.1536, desc: "Active listings for Support (bar backs, hosts, food runners) and Utility/Dishwashers." },
            { name: "The Exchange", lat: 39.7711, lng: -86.1538, desc: "Seeking Bartenders, Barbacks, and BOH support. General applications accepted via their portal." },
            { name: "The Tap", lat: 39.7714, lng: -86.1542, desc: "High hiring volume: Servers, Bartenders, Hosts, and Line Cooks wanted." },
            { name: "Bazbeaux Pizza", lat: 39.7716, lng: -86.1528, desc: "Explicitly states 'We‚Äôre hiring' for both Front and Back of house roles." },
            { name: "Bru Burger Bar", lat: 39.7724, lng: -86.1518, desc: "Frequent active listings for Servers, Cooks, and Expo staff in downtown/Mass Ave." },
            { name: "Garden Table", lat: 39.7719, lng: -86.1524, desc: "Often seeking Line Cooks and hospitality-focused servers. Prefers online portal apps." },
            { name: "Vicino", lat: 39.7721, lng: -86.1521, desc: "Italian concept with an active 'Join Our Team' form on their website." },
            { name: "The Knotted Spoon", lat: 39.7715, lng: -86.1530, desc: "Recently opened (Fall 2025). Likely hiring to maintain full staffing levels." },
            { name: "Flatiron on Penn", lat: 39.7749, lng: -86.1559, desc: "Experienced dining room and kitchen staff are encouraged to apply via their website jobs link." },
            { name: "Stixx (Cigar Bar)", lat: 39.7618, lng: -86.1524, desc: "Actively seeking their 'next superstar' staff members according to their site." },
            { name: "Living Room Lounge", lat: 39.7824, lng: -86.1455, desc: "Frequent active listings for Servers and Kitchen staff on ZipRecruiter." },
            { name: "Harrison‚Äôs", lat: 39.7853, lng: -86.1572, desc: "Active employment form available on harrisonsindy.com for all general positions." }
        ];

        // Add Restaurant Markers
        restaurants.forEach(res => {
            L.marker([res.lat, res.lng]).addTo(map)
                .bindPopup(`<div class="popup-content"><b>${res.name}</b><p>${res.desc}</p></div>`);
        });

        // --- GPS Geolocation Logic ---
        function onLocationFound(e) {
            const radius = e.accuracy / 2;

            // Create a blue dot for the user
            const userIcon = L.divIcon({
                className: 'user-location-icon',
                iconSize: [15, 15]
            });

            L.marker(e.latlng, { icon: userIcon }).addTo(map)
                .bindPopup("<b>You are here</b>").openPopup();

            // Optional: Draw a circle showing the accuracy of the GPS
            L.circle(e.latlng, radius, {
                color: '#3498db',
                fillColor: '#3498db',
                fillOpacity: 0.15,
                stroke: false
            }).addTo(map);
        }

        function onLocationError(e) {
            alert("Could not find your location. Make sure you have location services turned on.");
        }

        map.on('locationfound', onLocationFound);
        map.on('locationerror', onLocationError);

        // Start looking for the user immediately
        map.locate({ setView: true, maxZoom: 16 });
    </script>
</body>
</html>
